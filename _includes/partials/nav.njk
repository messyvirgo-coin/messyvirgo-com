{# Shared site navigation. Highlights current page based on page.url. #}
{% set currentUrl = page.url or '' %}
{% set isHome = currentUrl == '/' %}
{% set isToken = currentUrl == '/messy-virgo-coin.html' %}
{% set isLitepaper = currentUrl == '/litepaper.html' %}
{% set isBuildlog = currentUrl == '/buildlog.html' %}
{% set isDapps = currentUrl.startsWith('/dapps/') or currentUrl == '/crypto-token-technical-analysis.html' or currentUrl == '/crypto-macro-economics-report.html' %}
{% set isAbout = (currentUrl == '/founder-profiles.html') or (currentUrl == '/treasury.html') or (currentUrl == '/blog/') or (currentUrl.startsWith('/blog/')) %}
{% set swapUrl = 'https://aerodrome.finance/swap?from=eth&to=0x09f87f948c88848363b124c9099cbb58e4cc7cb6&chain0=8453&chain1=8453' %}

<nav id="navbar" class="sticky top-0 z-40 glassmorphism transition-all duration-300 shadow-lg">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex justify-between items-center h-16">
      <a href="/" class="text-2xl font-bold font-serif text-gradient">$MESSY</a>

      <!-- Desktop Nav -->
      <div class="hidden md:flex space-x-6 items-center text-sm font-semibold">
        <a href="/" class="text-gray-300 hover:text-pink-400 transition{% if isHome %} text-pink-400{% endif %}">Home</a>
        <a href="/messy-virgo-coin.html" class="text-gray-300 hover:text-pink-400 transition{% if isToken %} text-pink-400{% endif %}">Token</a>
        <a href="/litepaper.html" class="text-gray-300 hover:text-pink-400 transition{% if isLitepaper %} text-pink-400{% endif %}">Litepaper</a>

        <div class="relative group">
          <button type="button" class="text-gray-300 hover:text-pink-400 transition inline-flex items-center gap-1{% if isDapps %} text-pink-400 hover:text-pink-300{% endif %}" aria-haspopup="true" aria-label="dApps menu">
            dApps
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div class="dropdown-menu absolute left-0 mt-2 pt-2 w-64 rounded-lg border border-white/10 bg-gray-900/95 backdrop-blur shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible transition-opacity transition-visibility duration-200">
            <a href="/crypto-token-technical-analysis.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-pink-400 transition rounded-t-lg{% if currentUrl == '/crypto-token-technical-analysis.html' %} text-pink-400 font-semibold{% endif %}">Crypto Token Technical Analysis</a>
            <a href="/crypto-macro-economics-report.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-pink-400 transition rounded-b-lg{% if currentUrl == '/crypto-macro-economics-report.html' %} text-pink-400 font-semibold{% endif %}">Crypto Macro Economics Report</a>
          </div>
        </div>

        <a href="/buildlog.html" class="text-gray-300 hover:text-pink-400 transition{% if isBuildlog %} text-pink-400{% endif %}">Build Log</a>

        <div class="relative group">
          <button type="button" class="text-gray-300 hover:text-pink-400 transition inline-flex items-center gap-1{% if isAbout %} text-pink-400 hover:text-pink-300{% endif %}" aria-haspopup="true" aria-label="About menu">
            About
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div class="dropdown-menu absolute right-0 mt-2 pt-2 w-44 rounded-lg border border-white/10 bg-gray-900/95 backdrop-blur shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible transition-opacity transition-visibility duration-200">
            <a href="/founder-profiles.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-pink-400 transition rounded-t-lg{% if currentUrl == '/founder-profiles.html' %} text-pink-400{% endif %}">Founders</a>
            <a href="/treasury.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-pink-400 transition{% if currentUrl == '/treasury.html' %} text-pink-400{% endif %}">Treasury</a>
            <a href="/blog/" class="block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-pink-400 transition rounded-b-lg{% if currentUrl == '/blog/' or currentUrl.startsWith('/blog/') %} text-pink-400{% endif %}">Blog</a>
          </div>
        </div>

        <a href="{{ swapUrl }}" target="_blank" rel="noopener noreferrer" class="bg-pink-500 text-white px-4 py-2 rounded-md hover:bg-pink-600 transition shadow-lg shadow-pink-500/20">Swap $MESSY</a>
      </div>

      <!-- Mobile Nav Button -->
      <div class="md:hidden">
        <button id="mobile-menu-button" class="text-gray-300 focus:outline-none" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="md:hidden hidden bg-black/50">
    <a href="/" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800">Home</a>
    <a href="/messy-virgo-coin.html" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800">Token</a>
    <a href="/litepaper.html" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800">Litepaper</a>
    <div class="border-t border-white/10 my-1"></div>
    <div class="px-4 pt-2 pb-1 text-xs uppercase tracking-wider text-gray-500">dApps</div>
    <a href="/crypto-token-technical-analysis.html" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800{% if currentUrl == '/crypto-token-technical-analysis.html' %} text-pink-400 font-semibold{% endif %}">Crypto Token Technical Analysis</a>
    <a href="/crypto-macro-economics-report.html" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800{% if currentUrl == '/crypto-macro-economics-report.html' %} text-pink-400 font-semibold{% endif %}">Crypto Macro Economics Report</a>
    <div class="border-t border-white/10 my-1"></div>
    <a href="/buildlog.html" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800">Build Log</a>
    <div class="border-t border-white/10 my-1"></div>
    <div class="px-4 pt-2 pb-1 text-xs uppercase tracking-wider text-gray-500">About</div>
    <a href="/founder-profiles.html" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800">Founders</a>
    <a href="/treasury.html" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800">Treasury</a>
    <a href="/blog/" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-800">Blog</a>
    <a href="{{ swapUrl }}" target="_blank" rel="noopener noreferrer" class="block py-2 px-4 text-sm text-pink-400 hover:bg-gray-800 font-semibold">Swap $MESSY</a>
  </div>
</nav>

